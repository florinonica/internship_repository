<p>
  <strong style='color:#000000; font-size: 25px;'><%= @project.title %></strong>
</p>
<br>
<p>
  <%= @project.description %>
</p>

<p>
  <strong>Manager</strong>
  <td><%= @project.description %></td>
</p>

<div id="attachments">
  <% @project.attachments.each do |asset| %>
    <% if asset.is_image?%>
      <%= image_tag asset.file.url, :size => '100x100' %>
    <% end %>
  <% end %>
</div>

<h3>Clients</h3>
<div class="tab-pane" id="clients">
  <table cellpadding=15 cellspacing=15>
    <tr>
      <th class="col-xs-2">         </th>
      <th class="col-xs-3">Name </th>
      <th class="col-xs-3">Email</th>
      <th colspan="2"></th>
    </tr>

    <% @project.clients.each do |user| %>
      <tr>
        <td><%= image_tag(user.avatar.url(:thumb), :class => "round-image-50") %></td>
        <td class="col-xs-3"><%= user.first_name + " " + user.last_name %></td>
        <td class="col-xs-3"><%= user.email %></td>
        <% if current_user.can_add_clients %>
          <td><%= link_to 'Remove', controller: "projects", action: "remove_client", id: @project.id, client_id: user.id %></td>
        <% end %>
      </tr>
    <% end %>
  </table>
</div>

<% if current_user.can_add_clients && (Client.all - @project.clients).count > 0 %>
  <%= form_for @project, :url => {:action => :add_client} do |form| %>
    <%= form.collection_check_boxes :client_id, (Client.all - @project.clients), :id, :full_name, multiple: true, include_hidden: false, include_blank: false do |b|%>
      <br>
      <%= b.check_box %>
      <%= b.label %>
    <%end %>
    <p>
      <%= form.submit 'Add client', {class: "btn btn-info collapsed"} %>
    </p>
  <% end %>
<% end %>
<br>
<% if current_user.can_change_manager %>
  <%= form_for @project, :url => {:action => :add_project_manager} do |form| %>
    <%= form.collection_select :employee_ids, (Employee.select{ |e| e.roles.include?(Role.first) } - @project.employees), :id, :full_name, include_blank: true %>
    <p>
      <%= form.submit 'Add project manager', {class: "btn btn-info collapsed"} %>
    </p>
  <% end %>
<% end %>

<br>
<% if current_user.can_delete_project %>
  <%= link_to 'Edit', edit_project_path(@project), {:style => 'color:#0079bf; font-size: 15px; font-weight: bold', class: "glyphicon glyphicon-edit"} %> | <%= link_to 'Delete', project_path(@project), method: :delete, data: { confirm: 'Are you sure?' }, :style => 'color:#0079bf; font-size: 15px; font-weight: bold', class: "glyphicon glyphicon-remove" %>
<% end %>
<br>

<%= link_to 'Back', projects_path, {:style => 'color:#0079bf; font-size: 15px; font-weight: bold', class: "glyphicon glyphicon-arrow-left"} %>